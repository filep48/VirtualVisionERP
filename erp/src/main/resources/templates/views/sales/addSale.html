<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{layouts/layout :: head}">
    <!-- Common Head -->
</head>

<body>
    <header th:replace="~{layouts/layout :: header}">
        <!-- Common Header -->
    </header>

    <div class="container">
        <h1 th:text="${editMode} ? #{'pageTitle.editSale'} : #{'pageTitle.addSale'}"></h1>

        <form th:action="@{/sale/save}" th:object="${sale}" method="post">
            <input type="hidden" th:field="*{id}" />

            <!-- Campos específicos para Sale -->
            <div class="form-group">
                <label th:text="#{sale.quantity}"></label>
                <input type="number" th:field="*{quantity}" class="form-control" id="quantity" placeholder="Cantidad">
            </div>
            <div class="form-group">
                <label th:text="#{sale.taxValue}"></label>
                <input type="number" th:field="*{taxValue}" class="form-control" id="taxValue"
                    placeholder="Valor del Impuesto">
            </div>
            <div class="form-group">
                <label th:text="#{sale.saleDate}"></label>
                <input type="datetime-local" th:field="*{saleDate}" class="form-control" id="saleDate">
            </div>

            <!-- Selector de Cliente -->
            <!-- Este select debería llenarse con los clientes disponibles -->
            <div class="form-group">
                <select th:field="*{customer}" class="form-control" id="customer">
                    <option value="" th:utext="#{select.customer.placeholder}"></option>
                    <option th:each="customer : ${customers}" th:value="${customer.id}" th:text="${customer.name}">
                    </option>
                </select>
            </div>

            <!-- Selector de Empleados -->
            <div class="form-group">
                <label th:text="#{sale.employees}"></label>
                <!-- Este select debería llenarse con los empleados disponibles -->
                <select th:field="*{employees}" class="form-control" id="employees" multiple="multiple">
                    <option th:each="employee : ${employees}" th:value="${employee.id}" th:text="${employee.name}">
                    </option>
                </select>
            </div>
            <!-- Selector de Productos -->
            <div class="form-group">
                <label th:text="#{sale.products}"></label>
                <!-- Este select debería llenarse con los productos disponibles -->
                <select class="form-control" id="productSelect">
                    <option th:each="product : ${products}" th:value="${product.id}" th:text="${product.name}"></option>
                </select>
                <button type="button" id="addProductBtn" class="btn btn-primary">Añadir Producto</button>
            </div>

            <!-- Lista de Productos Seleccionados -->
            <table class="table" id="selectedProductsTable">
                <thead>
                    <tr>
                        <th th:text="#{product.name}"></th>
                        <th th:text="#{sale.quantity}"></th>
                        <th th:text="#{sale.price}"></th>
                        <th th:text="#{actions}"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Las filas se agregarán dinámicamente aquí -->
                </tbody>
            </table>

            <script th:src="@{/js/saleProductsHandler.js}"></script>

            <button type="submit" class="btn btn-primary">Guardar</button>
        </form>
    </div>

    <footer th:replace="~{layouts/layout :: footer}">
        <!-- Common Footer -->
    </footer>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.bundle.min.js"></script>
</body>

</html>
